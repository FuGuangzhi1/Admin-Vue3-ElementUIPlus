{"remainingRequest":"H:\\桌面\\showtimecodeweb\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!H:\\桌面\\showtimecodeweb\\src\\views\\PersonalManagement\\PersonalInfo.vue?vue&type=style&index=0&id=092a9ad0&scoped=true&lang=css","dependencies":[{"path":"H:\\桌面\\showtimecodeweb\\src\\views\\PersonalManagement\\PersonalInfo.vue","mtime":1647007417362},{"path":"H:\\桌面\\showtimecodeweb\\node_modules\\css-loader\\dist\\cjs.js","mtime":1642330607882},{"path":"H:\\桌面\\showtimecodeweb\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1642330610025},{"path":"H:\\桌面\\showtimecodeweb\\node_modules\\postcss-loader\\src\\index.js","mtime":1642330607358},{"path":"H:\\桌面\\showtimecodeweb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642330605221},{"path":"H:\\桌面\\showtimecodeweb\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1642330608822}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouaGlnaHRTZXggew0KICAgIGhlaWdodDogMjAwcHg7DQp9DQoNCi5pbWcgew0KICAgIHdpZHRoOiA4MHB4Ow0KICAgIGhlaWdodDogODBweDsNCiAgICBib3JkZXItcmFkaXVzOiAxMDAlOw0KfQ0K"},{"version":3,"sources":["H:\\桌面\\showtimecodeweb\\src\\views\\PersonalManagement\\PersonalInfo.vue"],"names":[],"mappings":";AAqFA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACN,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACjB;;AAEA,CAAC,CAAC,CAAC,EAAE;IACD,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACvB","file":"H:/桌面/showtimecodeweb/src/views/PersonalManagement/PersonalInfo.vue","sourceRoot":"","sourcesContent":["<template>\r\n    <span>\r\n        <div>\r\n            <el-row :gutter=\"12\">\r\n                <el-col :span=\"6\">\r\n                    <el-card class=\"hightSex\" shadow=\"always\">\r\n                        <!-- <el-avatar id=\"img\" shape=\"square\" :size=\"50\" :src=\"squareUrl\"></el-avatar> -->\r\n                        <img v-if=\"squareUrl\" :src=\"squareUrl\" class=\"img\" />\r\n                        <el-upload action :http-request=\"handleRequest\" :show-file-list=\"false\">\r\n                            <el-button type=\"primary\">\r\n                                点击上穿头像\r\n                                <el-icon class=\"el-icon--right\">\r\n                                    <Upload />\r\n                                </el-icon>\r\n                            </el-button>\r\n                        </el-upload>\r\n                    </el-card>\r\n                </el-col>\r\n                <el-col :span=\"6\">\r\n                    <el-card class=\"hightSex\" shadow=\"always\">性别:{{ data.sex }}</el-card>\r\n                </el-col>\r\n            </el-row>\r\n        </div>\r\n        <br />\r\n        <div>\r\n            <el-row :gutter=\"12\">\r\n                <el-col :span=\"6\">\r\n                    <el-card>姓名:{{ data.name }}</el-card>\r\n                </el-col>\r\n                <el-col :span=\"5\">\r\n                    <el-card>年龄:{{ data.age }}</el-card>\r\n                </el-col>\r\n                <el-col :span=\"12\">\r\n                    <el-card>邮箱:{{ data.email }}</el-card>\r\n                </el-col>\r\n            </el-row>\r\n        </div>\r\n    </span>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { ref } from 'vue';\r\nimport PersonalInfo from '@/api/personalInfoApi'\r\n\r\nlet data: any = ref({})\r\nconst squareUrl = ref<string>('');\r\n\r\n// const fileList: any = []\r\nif (window.localStorage.getItem('UserData') == null) {\r\n    PersonalInfo.GetUserAsync().then(res => {\r\n        data.value = res.data\r\n        window.localStorage.setItem('UserData', JSON.stringify(res.data))\r\n    })\r\n} else {\r\n    data.value = JSON.parse(window.localStorage.getItem('UserData') as string)\r\n}\r\n\r\nconst ProfilePhoto = async () => {\r\n    if (window.localStorage.getItem('ProfilePhotoData') == null) {\r\n        const ProfilePhoto = await PersonalInfo.GetProfilePhotoAsync();\r\n        squareUrl.value = ProfilePhoto.data;\r\n        window.localStorage.setItem('ProfilePhotoData', ProfilePhoto.data)\r\n    } else {\r\n        squareUrl.value = window.localStorage.getItem('ProfilePhotoData') ?? \"\"\r\n    }\r\n\r\n}\r\nProfilePhoto().then(_ => { })\r\nconst handleRequest = (e: any) => {\r\n    const fd = new FileReader()\r\n    fd.readAsDataURL(e.file)\r\n    // 将文件转化为base64格式传入后端\r\n    fd.onload = async () => {\r\n        console.log(fd.result)\r\n        const data = {\r\n            imgSrc: '',\r\n            imgName: e.file.name\r\n        }\r\n        data.imgSrc = fd.result as string\r\n        if (data.imgSrc === '') return\r\n        await PersonalInfo.SaveImgBase64(data)\r\n    }\r\n    ProfilePhoto().then(_ => { })\r\n}\r\n</script>\r\n<style scoped>\r\n.hightSex {\r\n    height: 200px;\r\n}\r\n\r\n.img {\r\n    width: 80px;\r\n    height: 80px;\r\n    border-radius: 100%;\r\n}\r\n</style>"]}]}