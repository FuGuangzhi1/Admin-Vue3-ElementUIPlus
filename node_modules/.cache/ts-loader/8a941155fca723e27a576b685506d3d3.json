{"remainingRequest":"H:\\桌面\\showtimecodeweb\\node_modules\\babel-loader\\lib\\index.js!H:\\桌面\\showtimecodeweb\\node_modules\\ts-loader\\index.js??ref--14-2!H:\\桌面\\showtimecodeweb\\src\\http\\requert.ts","dependencies":[{"path":"H:\\桌面\\showtimecodeweb\\src\\http\\requert.ts","mtime":1644838078793},{"path":"H:\\桌面\\showtimecodeweb\\babel.config.js","mtime":1642330622538},{"path":"H:\\桌面\\showtimecodeweb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642330605221},{"path":"H:\\桌面\\showtimecodeweb\\node_modules\\babel-loader\\lib\\index.js","mtime":1642330607368},{"path":"H:\\桌面\\showtimecodeweb\\node_modules\\ts-loader\\index.js","mtime":1642330608824}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IG1hc3NhZ2VTaG93IH0gZnJvbSAnQC91dGlscy9tZXNzYWdlSW5mbyc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IEVsTG9hZGluZyB9IGZyb20gJ2VsZW1lbnQtcGx1cyc7CnZhciBsb2FkaW5nOwoKdmFyIHN0YXJ0TG9hZGluZyA9IGZ1bmN0aW9uIHN0YXJ0TG9hZGluZygpIHsKICA7CiAgdmFyIG9wdGlvbnMgPSB7CiAgICBsb2NrOiB0cnVlLAogICAgdGV4dDogIuWKoOi9veS4rS4uLiIsCiAgICBiYWNrZ3JvdW5kOiAncmdiYSgwLDAsMCwwLjcpJwogIH07CiAgbG9hZGluZyA9IEVsTG9hZGluZy5zZXJ2aWNlKG9wdGlvbnMpOwp9OwoKdmFyIGVuZExvYWRpbmcgPSBmdW5jdGlvbiBlbmRMb2FkaW5nKCkgewogIGxvYWRpbmcuY2xvc2UoKTsKfTsKCnZhciB0b2tlbiA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzX3Rva2VuJyk7IC8vIOivt+axguaLpuaIqgoKYXhpb3MuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICBpZiAodG9rZW4gIT0gbnVsbCkgY29uZmlnLmhlYWRlcnMgPSB7CiAgICBBdXRob3JpemF0aW9uOiB0b2tlbgogIH07IC8vIOWKoOi9vQoKICBzdGFydExvYWRpbmcoKTsKICByZXR1cm4gY29uZmlnOwp9KTsgLy8g5ZON5bqU5oum5oiqCgpheGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIC8vIOe7k+adn2xvYWRpbmcKICBlbmRMb2FkaW5nKCk7IC8v5LiN5ZCM55u45bqU5omA57uZ55qE5o+Q56S6CgogIGlmIChyZXNwb25zZS5kYXRhKSB7CiAgICBtYXNzYWdlU2hvdyhyZXNwb25zZS5kYXRhLnN0YXRlLCByZXNwb25zZS5kYXRhLm1hc3NhZ2UpOwogIH0KCiAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGlmICh0b2tlbiA9PSBudWxsKSB7CiAgICBtYXNzYWdlU2hvdygxLCAi55m75b2V6L+H5pyfIik7CiAgfSAvLyDnu5PmnZ9sb2FkaW5nCgoKICBlbmRMb2FkaW5nKCk7IC8vIOmUmeivr+aPkOmGkgoKICBtYXNzYWdlU2hvdygxLCBlcnJvci5tZXNzYWdlKTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgYXhpb3M7"},{"version":3,"sources":["H:\\桌面\\showtimecodeweb\\src\\http\\requert.ts"],"names":[],"mappings":";AACA,SAAS,WAAT,QAA4B,qBAA5B;AACA,OAAO,KAAP,MAAyD,OAAzD;AACA,SAAS,SAAT,QAA0B,cAA1B;AAGA,IAAI,OAAJ;;AAEA,IAAM,YAAY,GAAG,SAAf,YAAe,GAAK;AAMvB;AAED,MAAM,OAAO,GAAY;AACvB,IAAA,IAAI,EAAE,IADiB;AAEvB,IAAA,IAAI,EAAE,QAFiB;AAGvB,IAAA,UAAU,EAAE;AAHW,GAAzB;AAKA,EAAA,OAAO,GAAG,SAAS,CAAC,OAAV,CAAkB,OAAlB,CAAV;AACD,CAdD;;AAgBA,IAAM,UAAU,GAAG,SAAb,UAAa,GAAK;AACtB,EAAA,OAAO,CAAC,KAAR;AACD,CAFD;;AAGA,IAAI,KAAK,GAAkB,MAAM,CAAC,YAAP,CAAoB,OAApB,CAA4B,cAA5B,CAA3B,C,CACA;;AACA,KAAK,CAAC,YAAN,CAAmB,OAAnB,CAA2B,GAA3B,CAA+B,UAAC,MAAD,EAA+B;AAC5D,MAAI,KAAK,IAAI,IAAb,EAAmB,MAAM,CAAC,OAAP,GAAiB;AAClC,IAAA,aAAa,EAAE;AADmB,GAAjB,CADyC,CAI5D;;AACA,EAAA,YAAY;AACZ,SAAO,MAAP;AACD,CAPD,E,CAUA;;AACA,KAAK,CAAC,YAAN,CAAmB,QAAnB,CAA4B,GAA5B,CAAgC,UAAC,QAAD,EAAiC;AAC/D;AACA,EAAA,UAAU,GAFqD,CAG/D;;AACA,MAAI,QAAQ,CAAC,IAAb,EAAmB;AACjB,IAAA,WAAW,CAAC,QAAQ,CAAC,IAAT,CAAc,KAAf,EAAsB,QAAQ,CAAC,IAAT,CAAc,OAApC,CAAX;AACD;;AACD,SAAO,QAAQ,CAAC,IAAhB;AACD,CARD,EAQG,UAAA,KAAK,EAAG;AACT,MAAI,KAAK,IAAI,IAAb,EAAmB;AACjB,IAAA,WAAW,CAAC,CAAD,EAAI,MAAJ,CAAX;AACD,GAHQ,CAIT;;;AACA,EAAA,UAAU,GALD,CAMT;;AACA,EAAA,WAAW,CAAC,CAAD,EAAI,KAAK,CAAC,OAAV,CAAX;AACA,SAAO,OAAO,CAAC,MAAR,CAAe,KAAf,CAAP;AACD,CAjBD;AAmBA,eAAe,KAAf","sourcesContent":["\r\nimport { massageShow } from '@/utils/messageInfo';\r\nimport axios, { AxiosRequestConfig, AxiosResponse } from 'axios';\r\nimport { ElLoading } from 'element-plus';\r\n\r\n\r\nlet loading: any;\r\n\r\nconst startLoading = () => {\r\n\r\n  interface Options {\r\n    lock: boolean;\r\n    text: string;\r\n    background: string;\r\n  };\r\n\r\n  const options: Options = {\r\n    lock: true,\r\n    text: \"加载中...\",\r\n    background: 'rgba(0,0,0,0.7)'\r\n  }\r\n  loading = ElLoading.service(options);\r\n}\r\n\r\nconst endLoading = () => {\r\n  loading.close();\r\n}\r\nlet token: string | null = window.localStorage.getItem('access_token')\r\n// 请求拦截\r\naxios.interceptors.request.use((config: AxiosRequestConfig) => {\r\n  if (token != null) config.headers = {\r\n    Authorization: token\r\n  }\r\n  // 加载\r\n  startLoading();\r\n  return config;\r\n})\r\n\r\n\r\n// 响应拦截\r\naxios.interceptors.response.use((response: AxiosResponse<any>) => {\r\n  // 结束loading\r\n  endLoading();\r\n  //不同相应所给的提示\r\n  if (response.data) {\r\n    massageShow(response.data.state, response.data.massage)\r\n  }\r\n  return response.data;\r\n}, error => {\r\n  if (token == null) {\r\n    massageShow(1, \"登录过期\")\r\n  }\r\n  // 结束loading\r\n  endLoading();\r\n  // 错误提醒\r\n  massageShow(1, error.message)\r\n  return Promise.reject(error);\r\n})\r\n\r\nexport default axios;"],"sourceRoot":""}]}