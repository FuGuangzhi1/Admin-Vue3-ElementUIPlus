{"remainingRequest":"H:\\桌面\\showtimecodeweb\\node_modules\\babel-loader\\lib\\index.js!H:\\桌面\\showtimecodeweb\\node_modules\\ts-loader\\index.js??ref--14-2!H:\\桌面\\showtimecodeweb\\src\\utils\\loginFormManage.ts","dependencies":[{"path":"H:\\桌面\\showtimecodeweb\\src\\utils\\loginFormManage.ts","mtime":1648181354358},{"path":"H:\\桌面\\showtimecodeweb\\babel.config.js","mtime":1642330622538},{"path":"H:\\桌面\\showtimecodeweb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642330605221},{"path":"H:\\桌面\\showtimecodeweb\\node_modules\\babel-loader\\lib\\index.js","mtime":1642330607368},{"path":"H:\\桌面\\showtimecodeweb\\node_modules\\ts-loader\\index.js","mtime":1642330608824}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkg6XFxcdTY4NENcdTk3NjJcXHNob3d0aW1lY29kZXdlYlxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IHJvdXRlciBmcm9tICJAL3JvdXRlciI7CmltcG9ydCB7IHJlYWN0aXZlLCByZWYgfSBmcm9tICJ2dWUiOwppbXBvcnQgQWNvdW50QXBpIGZyb20gJ0AvYXBpL2Fjb3VudEFwaSc7CmltcG9ydCB7IHRva2VuUmVjb3JkIH0gZnJvbSAiLi90b2tlbk1hbmdlciI7IC8v55m75b2V55qE5qCh6aqMCgpleHBvcnQgdmFyIHJ1bGVzID0gcmVhY3RpdmUoewogIGVtYWlsOiBbewogICAgdHlwZTogJ2VtYWlsJywKICAgIHJlcXVpcmVkOiB0cnVlLAogICAgbWVzc2FnZTogJ0VtYWlsIGlzIGluY29ycmVjdC4uLicsCiAgICB0cmlnZ2VyOiAnYmx1cicKICB9XSwKICBwYXNzd29yZDogW3sKICAgIHJlcXVpcmVkOiB0cnVlLAogICAgbWVzc2FnZTogJ3Bhc3N3b3JkIGNvdWxkIG5vdCBiZSBlbXB0eS4uLicsCiAgICB0cmlnZ2VyOiAnYmx1cicKICB9LCB7CiAgICBtaW46IDYsCiAgICBtYXg6IDMwLAogICAgbWVzc2FnZTogIlBhc3N3b3JkJ3MgbGVuZ3RoIGhhcyB0byBiZSA2IHRvIDMwIGNoYXJhY3RlcnMuLi4iCiAgfV0KfSk7CmV4cG9ydCB2YXIgbG9naW5Gb3JtID0gcmVhY3RpdmUoewogIGVtYWlsOiAnRnVHdWFuZ3poaTFAT3V0bG9vay5jb20nLAogIHBhc3N3b3JkOiAnMTIzNDU2Jwp9KTsgLy/ojrflj5booajljZXmlbDmja4KCmV4cG9ydCB2YXIgcnVsZUZvcm1SZWYgPSByZWYoKTsgLy/nmbvlvZXkuovku7YKCmV4cG9ydCB2YXIgc3VibWl0Rm9ybSA9IGZ1bmN0aW9uIHN1Ym1pdEZvcm0oZm9ybUVsKSB7CiAgaWYgKCFmb3JtRWwpIHJldHVybjsKICBmb3JtRWwudmFsaWRhdGUoIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh2YWxpZCkgewogICAgICB2YXIgZGF0YTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmICghdmFsaWQpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gQWNvdW50QXBpLmxvZ2luQXN5bmMobG9naW5Gb3JtKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsKCiAgICAgICAgICAgICAgaWYgKGRhdGEuc3RhdGUgPT09IDApIHsKICAgICAgICAgICAgICAgIHRva2VuUmVjb3JkKGRhdGEuZGF0YSk7CiAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCgnL2hvbWUnKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3IgZm9ybWF0Jyk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKSk7Cn07CnZhciBpc1Nob3dGb3JtID0gcmVmKGZhbHNlKTsKZXhwb3J0IHZhciBvblNob3cgPSBmdW5jdGlvbiBvblNob3coKSB7CiAgdmFyIGZvcm1FbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlbC1mb3JtJylbMF07CgogIGlmIChpc1Nob3dGb3JtLnZhbHVlKSB7CiAgICBmb3JtRWxlLnN0eWxlLmNzc1RleHQgPSAiIG9wYWNpdHk6IDE7IjsKICAgIGlzU2hvd0Zvcm0udmFsdWUgPSAhaXNTaG93Rm9ybS52YWx1ZTsKICB9IGVsc2UgewogICAgZm9ybUVsZS5zdHlsZS5jc3NUZXh0ID0gIiBvcGFjaXR5OiAwLjE7IjsKICAgIGlzU2hvd0Zvcm0udmFsdWUgPSAhaXNTaG93Rm9ybS52YWx1ZTsKICB9Cn07"},{"version":3,"sources":["H:\\桌面\\showtimecodeweb\\src\\utils\\loginFormManage.ts"],"names":[],"mappings":";;AAAA,OAAO,MAAP,MAAmB,UAAnB;AAEA,SAAS,QAAT,EAAmB,GAAnB,QAA8B,KAA9B;AACA,OAAO,SAAP,MAAsB,iBAAtB;AACA,SAAS,WAAT,QAA4B,eAA5B,C,CACA;;AACA,OAAO,IAAM,KAAK,GAAG,QAAQ,CAAC;AAC5B,EAAA,KAAK,EAAE,CACL;AACE,IAAA,IAAI,EAAE,OADR;AAEE,IAAA,QAAQ,EAAE,IAFZ;AAGE,IAAA,OAAO,EAAE,uBAHX;AAIE,IAAA,OAAO,EAAE;AAJX,GADK,CADqB;AAS5B,EAAA,QAAQ,EAAE,CACR;AACE,IAAA,QAAQ,EAAE,IADZ;AAEE,IAAA,OAAO,EAAE,gCAFX;AAGE,IAAA,OAAO,EAAE;AAHX,GADQ,EAMR;AACE,IAAA,GAAG,EAAE,CADP;AAEE,IAAA,GAAG,EAAE,EAFP;AAGE,IAAA,OAAO,EAAE;AAHX,GANQ;AATkB,CAAD,CAAtB;AA2BP,OAAO,IAAM,SAAS,GAAG,QAAQ,CAAO;AACtC,EAAA,KAAK,EAAE,yBAD+B;AAEtC,EAAA,QAAQ,EAAE;AAF4B,CAAP,CAA1B,C,CAIP;;AACA,OAAO,IAAM,WAAW,GAAG,GAAG,EAAvB,C,CACP;;AACA,OAAO,IAAM,UAAU,GAAG,SAAb,UAAa,CAAC,MAAD,EAAoD;AAC5E,MAAI,CAAC,MAAL,EAAa;AACb,EAAA,MAAM,CAAC,QAAP;AAAA,uEAAgB,iBAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACV,KADU;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAEO,SAAS,CAAC,UAAV,CAAqB,SAArB,CAFP;;AAAA;AAEN,cAAA,IAFM;AAGZ,cAAA,OAAO,CAAC,GAAR,CAAY,IAAZ;;AACA,kBAAI,IAAI,CAAC,KAAL,KAAe,CAAnB,EAAsB;AACpB,gBAAA,WAAW,CAAC,IAAI,CAAC,IAAN,CAAX;AACA,gBAAA,MAAM,CAAC,IAAP,CAAY,OAAZ;AAED;;AARW;AAAA;;AAAA;AAUZ,cAAA,OAAO,CAAC,GAAR,CAAY,cAAZ;AAVY;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAhB;;AAAA;AAAA;AAAA;AAAA;AAcD,CAhBM;AAkBP,IAAM,UAAU,GAAG,GAAG,CAAC,KAAD,CAAtB;AACA,OAAO,IAAM,MAAM,GAAG,SAAT,MAAS,GAAK;AACzB,MAAI,OAAO,GAAG,QAAQ,CAAC,sBAAT,CAAgC,SAAhC,EAA2C,CAA3C,CAAd;;AACA,MAAI,UAAU,CAAC,KAAf,EAAsB;AACpB,IAAA,OAAO,CAAC,KAAR,CAAc,OAAd,GAAwB,cAAxB;AACA,IAAA,UAAU,CAAC,KAAX,GAAmB,CAAC,UAAU,CAAC,KAA/B;AACD,GAHD,MAGO;AACL,IAAA,OAAO,CAAC,KAAR,CAAc,OAAd,GAAwB,gBAAxB;AACA,IAAA,UAAU,CAAC,KAAX,GAAmB,CAAC,UAAU,CAAC,KAA/B;AACD;AACF,CATM","sourcesContent":["import router from \"@/router\";\r\nimport { ElForm } from \"element-plus\";\r\nimport { reactive, ref } from \"vue\";\r\nimport AcountApi from '@/api/acountApi'\r\nimport { tokenRecord } from \"./tokenManger\"\r\n//登录的校验\r\nexport const rules = reactive({\r\n  email: [\r\n    {\r\n      type: 'email',\r\n      required: true,\r\n      message: 'Email is incorrect...',\r\n      trigger: 'blur'\r\n    }\r\n  ],\r\n  password: [\r\n    {\r\n      required: true,\r\n      message: 'password could not be empty...',\r\n      trigger: 'blur'\r\n    },\r\n    {\r\n      min: 6,\r\n      max: 30,\r\n      message: \"Password's length has to be 6 to 30 characters...\"\r\n    }\r\n  ],\r\n})\r\n//登录的视图模型\r\ninterface User {\r\n  email: string;\r\n  password: string;\r\n}\r\nexport const loginForm = reactive<User>({\r\n  email: 'FuGuangzhi1@Outlook.com',\r\n  password: '123456',\r\n})\r\n//获取表单数据\r\nexport const ruleFormRef = ref<InstanceType<typeof ElForm>>()\r\n//登录事件\r\nexport const submitForm = (formEl: InstanceType<typeof ElForm> | undefined) => {\r\n  if (!formEl) return\r\n  formEl.validate(async (valid) => {\r\n    if (valid) {\r\n      const data = await AcountApi.loginAsync(loginForm)\r\n      console.log(data)\r\n      if (data.state === 0) {\r\n        tokenRecord(data.data)\r\n        router.push('/home')\r\n\r\n      }\r\n    } else {\r\n      console.log('error format')\r\n      return\r\n    }\r\n  })\r\n}\r\n\r\nconst isShowForm = ref(false);\r\nexport const onShow = () => {\r\n  let formEle = document.getElementsByClassName('el-form')[0] as HTMLElement\r\n  if (isShowForm.value) {\r\n    formEle.style.cssText = \" opacity: 1;\"\r\n    isShowForm.value = !isShowForm.value\r\n  } else {\r\n    formEle.style.cssText = \" opacity: 0.1;\"\r\n    isShowForm.value = !isShowForm.value\r\n  }\r\n}"],"sourceRoot":""}]}